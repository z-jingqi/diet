# 菜谱功能用户体验流程

## 1. 菜谱推荐流程

### 初始请求

1. **用户询问**: 用户在聊天界面询问菜谱推荐
   - 例如: "有什么简单的晚餐推荐吗？"
   - 例如: "推荐几道用鸡胸肉的菜谱"
2. **AI回应**: AI助手回应推荐的菜谱基础信息

   - 包含菜名、预计烹饪时间、难度等基本信息
   - 避免一次性返回过多详细信息造成等待时长过长

3. **交互选项展示**: 聊天消息下方展示"生成详细菜谱"按钮

### 用户反馈

1. **喜好标记**:

   - 用户可以点击"不喜欢"按钮标记不希望看到的菜谱
   - 被标记为不喜欢的菜谱无法再生成详情
   - 系统记录用户喜好，用于未来推荐

2. **菜谱选择**:
   - 点击"生成菜谱"按钮选择希望查看详情的菜谱
   - 系统自动记录为用户喜欢的菜谱

## 2. 菜谱详情生成流程

### 详情生成

1. **请求生成**:
   - 用户点击某个菜谱的"生成菜谱"按钮
   - 显示加载状态和提示信息
2. **后台处理**:
   - 系统使用AI生成完整菜谱详情
   - 将生成的菜谱保存到数据库
3. **导航至详情**:
   - 生成完成后自动导航至菜谱详情页面
   - 同时将该菜谱标记为用户喜欢的菜谱

### 详情浏览

1. **基本信息区**: 展示菜谱名称、简介、烹饪时间、难度等
2. **食材区**: 列出所有需要的食材和用量
3. **步骤区**: 分步骤展示烹饪方法
4. **营养信息区**: 显示营养成分数据
5. **小贴士区**: 提供烹饪小技巧和建议

## 3. 菜谱管理流程 (待实现)

### 收藏管理

1. **收藏列表**:
   - 用户可以查看所有已生成(喜欢)的菜谱
   - 支持分类、排序和筛选功能
2. **批量操作**:
   - 支持多选菜谱进行批量操作
   - 例如：删除、添加到膳食计划等

### 菜谱编辑

1. **编辑入口**:
   - 菜谱详情页提供编辑按钮
   - 收藏列表支持直接编辑操作
2. **编辑界面**:
   - 支持修改食材、用量、步骤等
   - 支持添加/删除步骤和食材
   - 提供AI辅助编辑功能

## 4. 膳食计划流程 (待实现)

### 计划创建

1. **新建计划**:
   - 选择计划类型(日计划/周计划)
   - 设置计划名称和日期范围
2. **菜谱添加**:
   - 从收藏菜谱中选择添加
   - 或直接在计划中创建新菜谱
   - 拖拽功能支持调整顺序和餐次

### 计划使用

1. **计划查看**:
   - 按日期浏览计划内容
   - 菜谱卡片展示基本信息
2. **购物清单生成**:
   - 基于选定的菜谱自动生成购物清单
   - 智能合并相同食材
   - 支持标记已购买项目

## 用户体验重点

### 1. 减少等待

- 分步加载内容，先显示基本信息
- 后台异步生成详细内容
- 提供明确的加载状态反馈

### 2. 直观交互

- 喜好按钮状态清晰直观
- 生成菜谱按钮在不可用时明确禁用
- 操作结果提供即时反馈

### 3. 响应式设计

- 移动端适配：操作按钮大小适合触屏
- 桌面端优化：利用更大屏幕空间
- 一致的体验：核心功能在各平台保持一致

### 4. 个性化体验

- 基于用户喜好调整推荐
- 保存用户历史记录便于重复使用
- 支持自定义调整菜谱

## 待优化点

1. **首次加载速度**:

   - 考虑预加载常用菜谱模板
   - 优化菜谱图片加载策略

2. **离线支持**:

   - 已生成的菜谱支持离线访问
   - 关键操作支持离线队列

3. **多设备同步**:
   - 菜谱收藏同步到所有设备
   - 用户喜好数据实时同步
